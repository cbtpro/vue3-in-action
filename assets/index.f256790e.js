var e=Object.defineProperty,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;import{o as a,f as r,s as l,e as c,k as i,g as u,n as p,r as d,v,x as h,y as m,z as f,A as g,B as _,C as y,F as $,a as b}from"./vendor.3a3feda6.js";import{h as w}from"./index.449fe3ea.js";var L={chessboard:"_chessboard_13z61_2"};const E={};(E.__cssModules={}).$style=L,E.render=function(e,t){return a(),r("div",{class:[e.$style.chessboard]},[l(e.$slots,"default")],2)};var x=c({name:"map-container",components:{BackgroundChessboard:E}});(x.__cssModules={}).$style={"map-container":"_map-container_17xt2_2"},x.render=function(e,t,s,n,o,c){const d=i("background-chessboard");return a(),r("div",{class:e.$style["map-container"]},[u(d,null,{default:p((()=>[l(e.$slots,"default")])),_:3})],2)};var H=c({name:"map-container-inner",setup(){const e=d(),t=()=>{const t=e.value,s=t.offsetParent,{clientWidth:n,clientHeight:o}=s,{clientWidth:a,clientHeight:r}=t;return{view:{width:n,height:o},size:{width:a,height:r},center:{top:(r-o)/2,left:(a-n)/2,x:a/2,y:r/2},range:{startX:0,startY:0,endX:a-n,endY:r-o}}};let s=0,n=0,o=0,a=0;const r=v({top:0,left:0}),l=h(r,"top"),c=h(r,"left"),i=m((()=>({left:c.value+"px",top:l.value+"px"}))),u=function(t){console.log("trigger touchstart");const r=e.value;s=t.targetTouches[0].pageX,n=t.targetTouches[0].pageY,o=r.offsetLeft,a=r.offsetTop},p=function(r){console.log("trigger touchmove"),e.value;const i=t();var u=r.targetTouches[0].pageX-s,p=r.targetTouches[0].pageY-n;let d=o+u,v=a+p;const{range:{startX:h,startY:m,endX:f,endY:g}}=i;d>h&&(d=h),v>m&&(v=m),d<-f&&(d=-f),v<-g&&(v=-g),l.value=v,c.value=d,r.preventDefault()},y=function(e){console.log("touchend")},$=function(e){console.log("down")},b=function(e){console.log("move")},w=function(e){console.log("up")},L=()=>{(()=>{const s=t();e.value;const{center:{x:n,y:o,top:a,left:r}}=s;l.value=-a,c.value=-r})(),(()=>{const t=e.value;t.addEventListener("touchstart",u),t.addEventListener("touchmove",p),t.addEventListener("touchend",y),t.addEventListener("mousedown",$),t.addEventListener("mousemove",b),t.addEventListener("mouseup",w),t.addEventListener("pointerdown",$),t.addEventListener("pointermove",b),t.addEventListener("pointerup",w)})()},E=(e,s)=>{const n=t(),{range:{startX:o,startY:a,endX:r,endY:i}}=n;s>o&&(s=o),e>a&&(e=a),s<-r&&(s=-r),e<-i&&(e=-i),l.value=e,c.value=s};f((()=>{g((()=>{setTimeout((()=>{E(0,0)}),2e3),setTimeout((()=>{E(200,300)}),5e3),setTimeout((()=>{E(500,300)}),8e3),setTimeout((()=>{E(500,400)}),1e4)}))}));_((()=>{window.removeEventListener("load",L),(()=>{const t=e.value;t.removeEventListener("touchstart",u),t.removeEventListener("touchmove",p),t.removeEventListener("touchend",y),t.removeEventListener("mousedown",$),t.removeEventListener("mousemove",b),t.removeEventListener("mouseup",w)})()}));return{mapRef:e,mapStyle:i,t5:"./assets/t5.03361c86.jpg",imageLoadHandle:()=>{L()},mapClickHandle:e=>{const s=t(),{view:{width:n,height:o}}=s,{offsetX:a,offsetY:r}=e;let i=o/2-r,u=n/2-a;const{range:{startX:p,startY:d,endX:v,endY:h}}=s;u>p&&(u=p),i>d&&(i=d),u<-v&&(u=-v),i<-h&&(i=-h),l.value=i,c.value=u}}}});var X={t5:"_t5_vd2q0_2","map-container-inner":"_map-container-inner_vd2q0_8"};(H.__cssModules={}).$style=X,H.render=function(e,t){return a(),r("div",{ref:"mapRef",class:e.$style["map-container-inner"],style:e.mapStyle,onClick:t[2]||(t[2]=(...t)=>e.mapClickHandle&&e.mapClickHandle(...t))},[u("img",{src:e.t5,onLoad:t[1]||(t[1]=(...t)=>e.imageLoadHandle&&e.imageLoadHandle(...t)),alt:"",style:{display:"none"}},null,40,["src"]),u("div",{class:e.$style.t5},[l(e.$slots,"default")],2)],6)};var Y=c({name:"shop-a",setup:()=>({test:e=>{console.log(1)}})});(Y.__cssModules={}).$style={"shop-a":"_shop-a_1hchu_2"},Y.render=function(e,t,s,n,o,l){return a(),r("div",{class:e.$style["shop-a"],onClick:t[1]||(t[1]=y(((...t)=>e.test&&e.test(...t)),["stop"]))},null,2)};var k=c({name:"shop-b"});(k.__cssModules={}).$style={"shop-b":"_shop-b_1jknw_2"},k.render=function(e,t,s,n,o,l){return a(),r("div",{class:e.$style["shop-b"]},null,2)};var C=c({name:"shops",components:{ShopA:Y,ShopB:k}});var M={shops:"_shops_1czwx_2","shop-a":"_shop-a_1czwx_3","shop-b":"_shop-b_1czwx_7"};(C.__cssModules={}).$style=M,C.render=function(e,t,s,n,o,l){const c=i("shop-a"),p=i("shop-b");return a(),r($,null,[u(c,{class:e.$style["shop-a"]},null,8,["class"]),u(p,{class:e.$style["shop-b"]},null,8,["class"])],64)};var T=()=>((e,a)=>{for(var r in a||(a={}))s.call(a,r)&&o(e,r,a[r]);if(t)for(var r of t(a))n.call(a,r)&&o(e,r,a[r]);return e})({},w),j=c({name:"custom-map",components:{MapContainer:x,MapContainerInner:H,Shops:C},setup(){const{request:e}={request:e=>b(e)};(async()=>{try{const t=await e({url:"/api/index/test"});console.log(t)}catch(t){console.log(t)}})();const{get:t}=T();return(async()=>{try{const e=await t("/api/index/test");console.log("testUseHttp",e)}catch(e){console.log(e)}})(),{name:"peter"}},created(){this.testHttp()},mounted(){console.log("测试插件$perf:",this.$perf),console.log("测试插件$http:",this.$http)},methods:{async testHttp(){try{const e=await this.$http.get("/api/index/test");console.log("testHttp:",e)}catch(e){console.log(e)}}}});var z={map:"_map_tix9z_2"};(j.__cssModules={}).$style=z,j.render=function(e,t,s,n,o,l){const c=i("shops"),d=i("map-container-inner"),v=i("map-container");return a(),r("div",{class:e.$style.map},[u(v,null,{default:p((()=>[u(d,null,{default:p((()=>[u(c)])),_:1})])),_:1})],2)};export default j;
