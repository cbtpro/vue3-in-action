import{e,D as t,o as s,f as o,g as n,i as l,t as a,r,z as c,A as i,E as f,k as d,F as u,m as g}from"./vendor.3a3feda6.js";import{D as p,T as h}from"./index.449fe3ea.js";var m=e({name:"box",props:{good:{type:Object,required:!0}},setup:e=>({good:t(e).good})});var _={box:"_box_h433g_2",info:"_info_h433g_9",pic:"_pic_h433g_16",shade:"_shade_h433g_1",title:"_title_h433g_33",price:"_price_h433g_45"};const v=n("em",null,"¥",-1);(m.__cssModules={}).$style=_,m.render=function(e,t,r,c,i,f){return s(),o("div",{class:e.$style.box},[n("div",{class:e.$style.info},[n("a",{href:e.good.href},[n("div",{class:e.$style.pic},[n("img",{src:e.good.src,style:{height:"auto"}},null,8,["src"])],2)],8,["href"]),n("div",{class:e.$style.title},[n("a",null,[n("div",null,[n("strong",{class:e.$style.price},[v,l(a(e.good.price),1)],2)]),n("div",null,[n("em",null,a(e.good.name),1)])])],2)],2)],2)};const w=["./assets/1.e3db789b.jpg","./assets/2.3f9dc760.jpg","./assets/3.de0c7927.jpg","./assets/4.51de594a.jpg","./assets/5.979bdc66.jpg","./assets/6.d625b796.jpg","./assets/7.252f72b3.jpg","./assets/8.080a8f31.jpg","./assets/9.d28d6467.jpg","./assets/10.9196895e.jpg"];var y=e({name:"waterfall-flow",components:{Box:m},setup(){const e=r();f();const t=r([]),s=()=>new Promise(((e,t)=>{setTimeout((()=>{const t=new Array(10).fill(0).map(((e,t)=>{const s=Date.now()+t+"";return{uuid:s,name:s,title:`商品${s}`,src:w[t],href:"https://www.baidu.com",price:18*Math.random()}}));e(t)}),800)}));var o=0;function n(e,t,s,n){o>=n||(e.style.position="absolute",e.style.top=t+"px",e.style.left=s+"px",o=n)}function l(e,t){let s=0;for(let o in t)t[o]==e&&(s=Number(o));return s}const a=(s=[])=>{t.value=t.value.concat(s),function(){var t=e.value,s=d(t);if(0!==s.length){var o=s[0].offsetWidth,a=Math.floor(document.documentElement.clientWidth/o);t.style.width=o*a+"px";for(var r=[],c=0;c<s.length;c++)if(c<a)r[c]=s[c].offsetHeight;else{var i=Math.min.apply(null,r),f=l(i,r);n(s[c],i,s[f].offsetLeft,c),r[f]+=s[c].offsetHeight}}}()};function d(e){return e.children}function u(){var t;return document.documentElement.clientHeight+(document.documentElement.scrollTop||document.body.scrollTop)>=(t=d(e.value))[t.length-1].offsetTop+t[t.length-1].offsetHeight}const{Throttle:g}={Debounce:p,Throttle:h};return c((()=>{i((()=>{!async function(){const e=await s();a(e)}(),window.onscroll=(new g).use((async function(){if(console.log("onscroll"),u()){const e=await s();a(e)}}),800)}))})),{containerRef:e,goods:t}}});(y.__cssModules={}).$style={"waterfall-flow":"_waterfall-flow_n46vt_2"},y.render=function(e,t){const n=d("box");return s(),o("div",{ref:"containerRef",class:e.$style["waterfall-flow"]},[(s(!0),o(u,null,g(e.goods,(e=>(s(),o(n,{key:e.uuid,good:e},null,8,["good"])))),128))],2)};export default y;
