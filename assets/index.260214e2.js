import{e,y as t,E as s,o,f as n,s as l,J as a,g as r,i,t as c,r as d,v as u,G as f,z as m,A as h,K as p,k as _,F as y,n as g,q as v}from"./vendor.d9a60650.js";import{u as w,i as x,a as b,b as $,c as E,d as M,e as T,f as j,g as C,h as H,j as W}from"./10.e02845c0.js";import"./index.b006d70e.js";var q=e({name:"item",props:{index:{type:Number,required:!0}},setup(e){const o=t((()=>({})));s((()=>{}));return{itemStyle:o,test:()=>{alert(1)}}}});var N={item:"_item_183az_2"};(q.__cssModules={}).$style=N,q.render=function(e,t,s,a,r,i){return o(),n("div",{class:e.$style.item,style:e.itemStyle},[l(e.$slots,"default")],6)};var k=e({name:"box",props:{good:{type:Object,required:!0}},setup:e=>({good:a(e).good})});var z={box:"_box_7erdh_2",info:"_info_7erdh_10",pic:"_pic_7erdh_17",shade:"_shade_7erdh_1",title:"_title_7erdh_34",price:"_price_7erdh_46"};const A=r("em",null,"¥",-1);(k.__cssModules={}).$style=z,k.render=function(e,t,s,l,a,d){return o(),n("div",{class:e.$style.box},[r("div",{class:e.$style.info},[r("a",{href:e.good.href},[r("div",{class:e.$style.pic},[r("img",{src:e.good.src,style:{height:"auto"}},null,8,["src"])],2)],8,["href"]),r("div",{class:e.$style.title},[r("a",null,[r("div",null,[r("strong",{class:e.$style.price},[A,i(c(e.good.price),1)],2)]),r("div",null,[r("em",null,c(e.good.name),1)])])],2)],2)],2)};const R=[x,b,$,E,M,T,j,C,H,W];var S=e({name:"waterfall-flow",components:{Item:q,Box:k},setup(){const e=d();p(),u({boxWidth:816,colsNum:Math.floor(document.documentElement.clientWidth/816),containerWidth:1632,colHeights:[]});const t=d([]),s=()=>new Promise(((e,t)=>{setTimeout((()=>{const t=new Array(10).fill(0).map(((e,t)=>{const s=Date.now()+t+"";return{uuid:s,name:s,title:`商品${s}`,src:R[t],href:"https://www.baidu.com",price:18*Math.random()}}));e(t)}),800)}));var o=0;function n(e,t,s,n){o>=n||(e.style.position="absolute",e.style.top=t+"px",e.style.left=s+"px",o=n)}function l(e,t){let s=0;for(let o in t)t[o]==e&&(s=Number(o));return s}const a=(e=[])=>{t.value=t.value.concat(e)};function r(e){return e.children}function i(){var t;return document.documentElement.clientHeight+(document.documentElement.scrollTop||document.body.scrollTop)>=(t=r(e.value))[t.length-1].offsetTop+t[t.length-1].offsetHeight}f((()=>{setTimeout((()=>{!function(){var t=e.value,s=r(t);if(0!==s.length){var o=s[0].firstElementChild.offsetWidth,a=Math.floor(document.documentElement.clientWidth/o);t.style.width=o*a+"px";for(var i=[],c=0;c<s.length;c++)if(c<a)i[c]=s[c].firstElementChild.offsetHeight;else{var d=Math.min.apply(null,i),u=l(d,i);n(s[c].firstElementChild,d,s[u].firstElementChild.offsetLeft,c),i[u]+=s[c].firstElementChild.offsetHeight}}}()}),1e3)}));const{Throttle:c}=w();return m((()=>{h((()=>{!async function(){const e=await s();a(e)}(),window.onscroll=(new c).use((async function(){if(console.log("onscroll"),i()){const e=await s();a(e)}}),800)}))})),{containerRef:e,goods:t}}});(S.__cssModules={}).$style={"waterfall-flow":"_waterfall-flow_n46vt_2"},S.render=function(e,t){const s=_("box"),l=_("item");return o(),n("div",{ref:"containerRef",class:e.$style["waterfall-flow"]},[(o(!0),n(y,null,g(e.goods,((e,t)=>(o(),n(l,{index:t,key:e.uuid},{default:v((()=>[r(s,{good:e},null,8,["good"])])),_:2},1032,["index"])))),128))],2)};export default S;
