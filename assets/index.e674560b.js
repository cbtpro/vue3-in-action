import{o as e,e as t,q as n,d as s,r as o,s as a,j as l,f as r,m as c,v as i,x as u,t as d,F as p,y as v,z as m,A as h,B as _,C as f,D as g}from"./vendor.a96b9fac.js";var y={chessboard:"_chessboard_13z61_2"};const L={};(L.__cssModules={}).$style=y,L.render=function(s,o){return e(),t("div",{class:[s.$style.chessboard]},[n(s.$slots,"default")],2)};var $=s({name:"map-container",components:{BackgroundChessboard:L},setup(){const e=o();return{position:a({x:400,y:400}),moveHandle:()=>{console.log(e.value)},mapRef:e}}});($.__cssModules={}).$style={"map-container":"_map-container_17xt2_2"},$.render=function(s,o,a,v,m,h){const _=l("background-chessboard");return e(),t(p,null,[r("div",{ref:"mapRef",class:s.$style["map-container"]},[r(_,null,{default:c((()=>[n(s.$slots,"default")])),_:3})],2),i(r("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.position.x=e)},null,512),[[u,s.position.x]]),i(r("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.position.y=e)},null,512),[[u,s.position.y]]),r("button",{onClick:o[3]||(o[3]=(...e)=>s.moveHandle&&s.moveHandle(...e))},"移动到x: "+d(s.position.x)+", y: "+d(s.position.y),1)],64)};var b=s({name:"map-container-inner",setup(){const e=o(),t=()=>{const t=e.value,n=t.offsetParent,{clientWidth:s,clientHeight:o}=n,{clientWidth:a,clientHeight:l}=t;return{view:{width:s,height:o},size:{width:a,height:l},center:{top:(l-o)/2,left:(a-s)/2,x:a/2,y:l/2},range:{startX:0,startY:0,endX:a-s,endY:l-o}}};let n=0,s=0,l=0,r=0;const c=a({top:0,left:0}),i=v(c,"top"),u=v(c,"left"),d=m((()=>({left:u.value+"px",top:i.value+"px"}))),p=function(t){console.log("trigger touchstart");const o=e.value;n=t.targetTouches[0].pageX,s=t.targetTouches[0].pageY,l=o.offsetLeft,r=o.offsetTop},g=function(o){console.log("trigger touchmove"),e.value;const a=t();var c=o.targetTouches[0].pageX-n,d=o.targetTouches[0].pageY-s;let p=l+c,v=r+d;const{range:{startX:m,startY:h,endX:_,endY:f}}=a;p>m&&(p=m),v>h&&(v=h),p<-_&&(p=-_),v<-f&&(v=-f),i.value=v,u.value=p,o.preventDefault()},y=function(e){console.log("touchend")},L=function(e){console.log("down")},$=function(e){console.log("move")},b=function(e){console.log("up")},x=()=>{(()=>{const n=t();e.value;const{center:{x:s,y:o,top:a,left:l}}=n;i.value=-a,u.value=-l})(),(()=>{const t=e.value;t.addEventListener("touchstart",p),t.addEventListener("touchmove",g),t.addEventListener("touchend",y),t.addEventListener("mousedown",L),t.addEventListener("mousemove",$),t.addEventListener("mouseup",b),t.addEventListener("pointerdown",L),t.addEventListener("pointermove",$),t.addEventListener("pointerup",b)})()},E=(e,n)=>{const s=t(),{range:{startX:o,startY:a,endX:l,endY:r}}=s;n>o&&(n=o),e>a&&(e=a),n<-l&&(n=-l),e<-r&&(e=-r),i.value=e,u.value=n};h((()=>{_((()=>{setTimeout((()=>{E(0,0)}),2e3),setTimeout((()=>{E(200,300)}),5e3),setTimeout((()=>{E(500,300)}),8e3),setTimeout((()=>{E(500,400)}),1e4)}))}));f((()=>{window.removeEventListener("load",x),(()=>{const t=e.value;t.removeEventListener("touchstart",p),t.removeEventListener("touchmove",g),t.removeEventListener("touchend",y),t.removeEventListener("mousedown",L),t.removeEventListener("mousemove",$),t.removeEventListener("mouseup",b)})()}));return{mapRef:e,mapStyle:d,t5:"./assets/t5.03361c86.jpg",imageLoadHandle:()=>{x()},mapClickHandle:e=>{const n=t(),{view:{width:s,height:o}}=n,{offsetX:a,offsetY:l}=e;let r=o/2-l,c=s/2-a;const{range:{startX:d,startY:p,endX:v,endY:m}}=n;c>d&&(c=d),r>p&&(r=p),c<-v&&(c=-v),r<-m&&(r=-m),i.value=r,u.value=c}}}});var x={t5:"_t5_vd2q0_2","map-container-inner":"_map-container-inner_vd2q0_8"};(b.__cssModules={}).$style=x,b.render=function(s,o){return e(),t("div",{ref:"mapRef",class:s.$style["map-container-inner"],style:s.mapStyle,onClick:o[2]||(o[2]=(...e)=>s.mapClickHandle&&s.mapClickHandle(...e))},[r("img",{src:s.t5,onLoad:o[1]||(o[1]=(...e)=>s.imageLoadHandle&&s.imageLoadHandle(...e)),alt:"",style:{display:"none"}},null,40,["src"]),r("div",{class:s.$style.t5},[n(s.$slots,"default")],2)],6)};var E=s({name:"shop-a",setup:()=>({test:e=>{console.log(1)}})});(E.__cssModules={}).$style={"shop-a":"_shop-a_1hchu_2"},E.render=function(n,s,o,a,l,r){return e(),t("div",{class:n.$style["shop-a"],onClick:s[1]||(s[1]=g(((...e)=>n.test&&n.test(...e)),["stop"]))},null,2)};var w=s({name:"shop-b"});(w.__cssModules={}).$style={"shop-b":"_shop-b_1jknw_2"},w.render=function(n,s,o,a,l,r){return e(),t("div",{class:n.$style["shop-b"]},null,2)};var H=s({name:"shops",components:{ShopA:E,ShopB:w}});var X={shops:"_shops_1czwx_2","shop-a":"_shop-a_1czwx_3","shop-b":"_shop-b_1czwx_7"};(H.__cssModules={}).$style=X,H.render=function(n,s,o,a,c,i){const u=l("shop-a"),d=l("shop-b");return e(),t(p,null,[r(u,{class:n.$style["shop-a"]},null,8,["class"]),r(d,{class:n.$style["shop-b"]},null,8,["class"])],64)};var Y=s({name:"custom-map",components:{MapContainer:$,MapContainerInner:b,Shops:H},setup:()=>({name:"peter"})});var C={map:"_map_tix9z_2"};(Y.__cssModules={}).$style=C,Y.render=function(n,s,o,a,i,u){const d=l("shops"),p=l("map-container-inner"),v=l("map-container");return e(),t("div",{class:n.$style.map},[r(v,null,{default:c((()=>[r(p,null,{default:c((()=>[r(d)])),_:1})])),_:1})],2)};export default Y;
